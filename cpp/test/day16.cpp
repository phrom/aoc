#include <catch2/catch.hpp>

#include "day16.hpp"
#include <iostream>

TEST_CASE("Day 16: Packet Decoder")
{
    SECTION("Part 1")
    {
        REQUIRE(day16::part1("8A004A801A8002F478") == 16);
        REQUIRE(day16::part1("620080001611562C8802118E34") == 12);
        REQUIRE(day16::part1("C0015000016115A2E0802F182340") == 23);
        REQUIRE(day16::part1("A0016C880162017C3686B18A3D4780") == 31);
    }

    SECTION("Part 2")
    {
        REQUIRE(day16::part2("C200B40A82") == 3);
        REQUIRE(day16::part2("04005AC33890") == 54);
        REQUIRE(day16::part2("880086C3E88112") == 7);
        REQUIRE(day16::part2("CE00C43D881120") == 9);
        REQUIRE(day16::part2("D8005AC2A8F0") == 1);
        REQUIRE(day16::part2("F600BC2D8F") == 0);
        REQUIRE(day16::part2("9C005AC2F8F0") == 0);
        REQUIRE(day16::part2("9C0141080250320F1802104A08") == 1);
        day16::parse(
            "020D790050D26C13EC1348326D336ACE00EC299E6A8B929ED59C880502E00A526B"
            "969F62BF35CB4FB15B93A6311F67F813300470037500043E2D4218FA000864538E"
            "905A39CAF77386E35AB01802FC01BA00021118617C1F00043A3F4748A53CF66008"
            "D00481272D73308334EDB0ED304E200D4E94CF612A49B40036C98A7CF24A53CA94"
            "C6370FBDCC9018029600ACD529CA9A4F62ACD2B5F928802F0D2665CA7D6CC01391"
            "9E78A3800D3CF7794A8FC938280473057394AFF15099BA23CDD37A08400E2A5F72"
            "97F916C9F97F82D2DFA734BC600D4E3BC89CCBABCBE2B77D200412599244D4C013"
            "8C780120CC67E9D351C5AB4E1D4C981802980080CDB84E034C5767C60124F3BC98"
            "4CD1E479201232C016100662D45089A00087C1084F12A724752BEFEA9C51500566"
            "759BF9BE6C5080217910CD00525B6350E8C00E9272200DCE4EF4C1DD003952F705"
            "9BCF675443005680103976997699795E830C02E4CBCE72EFC6A6218C88C9DF2F33"
            "51FCEF2D83CADB779F59A052801F2BAACDAE7F52A8190073937FE1D700439234DB"
            "B4F7374DC0CC804CF1006A0D47B8A4200F445865170401F8251662D100909401AB"
            "8803313217C680004320D43F871308D140C010E0069E7EDD1796AFC8255800052E"
            "20043E0F42A8B6400864258E51088010B85910A0F4ECE1DFE069C0229AE63D0B8D"
            "C6F82529403203305C00E1002C80AF5602908400A20240100852401E9840083002"
            "1400D30029004B6100294008400B9D0023240061C000D19CACCD9005F694AEF649"
            "3D3F9948DEB3B4CC273FFD5E9AD85CFDFF6978B80050392AC3D98D796449BE304F"
            "E7F0C13CD716656BD0A6002A67E61A400F6E8029300B300B11480463D004C40188"
            "9B1CA31800211162204679621200FCAC01791CF6B1AFCF2473DAC6BF3A9F170001"
            "6A3D90064D359B35D003430727A7DC464E6401594A57C93A0084CC56A662B8C00A"
            "A424989F2A9112")
            ->print(std::cout);
    }
}
